!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("wasync",[],t):"object"==typeof exports?exports.wasync=t():e.wasync=t()}("undefined"!=typeof self?self:this,function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"Debounce",{enumerable:!0,get:function(){return r.Debounce}}),Object.defineProperty(t,"ObjectDebounce",{enumerable:!0,get:function(){return r.ObjectDebounce}});var r=n(1)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Debounce=s,t.ObjectDebounce=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.wait,n=void 0===t?r:t,i=e.waitBetween,a=void 0===i?o:i,c=e.prop,f=void 0===c?u:c;this.func=function(e){var t=e.validate,r=e.prepare,o=e.run,u=e.success,i=e.failure,c=e.cleanup;return function(){this[f]||(this[f]=new s({wait:n,waitBetween:a}));var e=this[f],l=e.func({validate:t,prepare:r,run:o,success:u,failure:i,cleanup:c});return l.apply(this,arguments)}}};var r=300,o=0,u="$wasyncDebounce",i=1,a=2,c=3;function s(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.wait,n=void 0===t?r:t,u=e.waitBetween,s=void 0===u?o:u,f=this;f.state=i,f.next=void 0,f.func=function(e){var t=e.validate,n=e.prepare,r=e.run,o=e.success,u=e.failure,a=e.cleanup;if(!r)throw new Error('"run" function is not defined! That is the point of this Debounce class, so you probably are doing something wrong');return function(){var e={this:this,args:arguments,hooks:{validate:t,prepare:n,run:r,success:o,failure:u,cleanup:a}};e.params=f.validate(e),e.params&&(f.state===i&&f.prepare(e),f.next=e,f.state===i&&f.wait())}},f.validate=function(e){var t=e.hooks.validate,n=e.this,r=e.args,o={};return t&&(o=t.apply(n,r)),o},f.prepare=function(e){var t=e.hooks.prepare,n=e.this;t&&t.apply(n)},f.wait=function(){f.state=a,setTimeout(function(){f.run()},n)},f.run=function(){f.state=c;var e,t=this.next,n=t.this,r=t.params,o=t.hooks,u=o.run,a=o.success,l=o.failure,p=o.cleanup;try{e=Promise.resolve(u.call(n,r))}catch(t){e=Promise.reject(t)}e.then(function(){a&&a.apply(n,arguments)}).catch(function(){l&&l.apply(n,arguments)}).finally(function(){if(f.next===t)try{p&&p.apply(n)}finally{f.state=i}else setTimeout(function(){return f.run()},s)})}}}])});
//# sourceMappingURL=wasync.min.js.map