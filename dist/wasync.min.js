!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("wasync",[],t):"object"==typeof exports?exports.wasync=t():e.wasync=t()}("undefined"!=typeof self?self:this,function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=1)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Debounce=c,t.ObjectDebounce=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.wait,n=void 0===t?r:t,u=e.prop,i=void 0===u?o:u;this.func=function(e){var t=e.validate,r=e.prepare,o=e.run,u=e.success,a=e.failure,s=e.cleanup;return function(){this[i]||(this[i]=new c({wait:n}));var e=this[i],f=e.func({validate:t,prepare:r,run:o,success:u,failure:a,cleanup:s});return f.apply(this,arguments)}}};var r=300,o="$wasyncDebounce",u=1,i=2,a=3;function c(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).wait,t=void 0===e?r:e,n=this;n.state=u,n.next=void 0,n.timeout=null,n.func=function(e){var t=e.validate,r=e.prepare,o=e.run,i=e.success,c=e.failure,s=e.cleanup;if(!o)throw new Error('"run" function is not defined! That is the point of this Debounce class, so you probably are doing something wrong');return function(){var e={this:this,args:arguments,hooks:{validate:t,prepare:r,run:o,success:i,failure:c,cleanup:s}};e.params=n.validate(e),e.params&&(n.state===u&&n.prepare(e),n.next=e,n.state!==a&&n.wait())}},n.validate=function(e){var t=e.hooks.validate,n=e.this,r=e.args,o={};return t&&(o=t.apply(n,r)),o},n.prepare=function(e){var t=e.hooks.prepare,n=e.this;t&&t.apply(n)},n.wait=function(){n.state=i,clearTimeout(n.timeout),n.timeout=setTimeout(function(){n.run()},t)},n.run=function(){n.state=a;var e,t=this.next,r=t.this,o=t.params,i=t.hooks,c=i.run,s=i.success,f=i.failure,l=i.cleanup;try{e=Promise.resolve(c.call(r,o))}catch(t){e=Promise.reject(t)}e.then(function(){n.next===t&&s&&s.apply(r,arguments)}).catch(function(){n.next===t&&f&&f.apply(r,arguments)}).finally(function(){if(n.next===t)try{l&&l.apply(r)}finally{n.state=u}else setTimeout(function(){return n.run()},0)})}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"Debounce",{enumerable:!0,get:function(){return r.Debounce}}),Object.defineProperty(t,"ObjectDebounce",{enumerable:!0,get:function(){return r.ObjectDebounce}});var r=n(0)}])});
//# sourceMappingURL=wasync.min.js.map